<!DOCTYPE html>
{% load static %}
{% load pwa %}
{% load Iman %}
<html lang="fa">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Material Design for Bootstrap fonts and icons -->
    <link rel = "stylesheet" href = "https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/css/materialize.min.css">
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
    <script type = "text/javascript" src = "https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="{% static 'money/daterangepicker.css' %}" rel="stylesheet" type="text/css" media="all" />
    <link href="{% static 'money/datepicker-theme.css' %}" rel="stylesheet" type="text/css" media="all"  />
    <link rel="stylesheet" href="{% static 'money/style.css' %}">

    <title>تراکنش ها</title>

    {% progressive_web_app_meta %}
  </head>
  <body style="background-color: #f1f1f1;">
  <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: #4074B8!important;">
        <div class="container">
            <a class="navbar-brand" href="{% url 'home' %}" style="font-family: sans-serif; font-size: 12px;">برگشت به خانه</a>
        </div>
    </nav>
    <div class="container">
      {% load humanize %}
      <div id="mainRowPhones">
          <form method="post">
              {% csrf_token %}
              <div class="row" style="margin-top: 35px;">
                  <div class="col-xs-6">
                      <select name="bank" class="buttonShape">
                          {% if selected_source %}
                          <option value="{{ selected_source.id }}">{{ selected_source.name_bank }}</option>
                          {% endif %}
                          <option value="0">همه</option>
                          {% for company in name_bank %}
                          <option value="{{ company.id }}">{{ company.name_bank }}</option>
                          {% endfor %}
                      </select>
                  </div>
                  <div class="col-xs-6">
                      <p class="buttonShape">منبع مالی</p>
                  </div>
              </div>
              <div class="row" style="margin-top: 35px">
                  <div class="col-xs-4">
                      <input type="text"  name="endDate" class="buttonShape jalali-datepicker">
                  </div>
                  <div class="col-xs-2">
                      <div class="buttonShape">تا</div>
                  </div>
                  <div class="col-xs-4">
                      <input type="text"  name="startDate" class="buttonShape jalali-datepicker">
                  </div>
                  <div class="col-xs-2">
                      <div class="buttonShape">از</div>
                  </div>
              </div>
              <div class="row" style="margin-top: 35px;">
                  <div class="col-xs-12">
                      <input type="text" name="searchText" class="buttonShape" placeholder="کلمه مورد نظر برای جستجو را وارد کنید">
                  </div>
              </div>
              <div class="row" style="margin-top: 35px;">
                  <div class="col-xs-12">
                      <button type="submit" class="buttonShape">انتخاب</button>
                  </div>
              </div>
          </form>
          <div class="row" style="margin-top: 35px;">
              <div class="col-xs-12">
                  <p class="buttonShape"> مجموع {{ type }}: {{ sumOfType|intcomma }}</p>
              </div>
          </div>
          <div class="row" style="margin-top: 35px;">
              <div class="col-xs-12">
                  <table dir="ltr" border=".5" width="100%"   cellpadding="4" cellspacing="3" align="center" style="border-color: rgb(43, 15, 7);">
                      <thead>
                      <tr>
                          <th scope="col" style="text-align: center">عنوان</th>
                          <th scope="col" style="text-align: center">رقم</th>
                          <th scope="col" style="text-align: center">تاریخ</th>
                          <th scope="col" style="text-align: center">منبع</th>
                          <th scope="col" style="text-align: center">تضویحات</th>
                      </tr>
                      {% for transaction in transactions %}
                      <tr align="center">
                          <td>{{ transaction.title }}</td>
                          <td>{{ transaction.cash|intcomma }}</td>
                          <td>{{ transaction.date|jdate:'%y/%m/%d' }}</td>
                          <td>{{ transaction.source }}</td>
                          <td>{{ transaction.desc }}</td>
                      </tr>
                      {% endfor %}
                      </thead>
                  </table>
              </div>
          </div>
      </div>
      <div id="mainRowCamputer">
          <form method="post">
              {% csrf_token %}
              <div class="row" style="margin-top: 35px;">
                  <div class="col-md-2"></div>
                  <div class="col-md-4">
                      <select name="bank" class="buttonShape">
                          {% if selected_source %}
                          <option value="{{ selected_source.id }}">{{ selected_source.name_bank }}</option>
                          {% endif %}
                          <option value="0">همه</option>
                          {% for company in name_bank %}
                          <option value="{{ company.id }}">{{ company.name_bank }}</option>
                          {% endfor %}
                      </select>
                  </div>
                  <div class="col-md-4">
                      <p class="buttonShape">منبع مالی</p>
                  </div>
                  <div class="col-md-2"></div>
              </div>
              <div class="row" style="margin-top: 35px">
                  <div class="col-md-2"></div>
                  <div class="col-md-2">
                      <input type="text"  name="endDate" class="buttonShape jalali-datepicker">
                  </div>
                  <div class="col-md-2">
                      <div class="buttonShape">تا</div>
                  </div>
                  <div class="col-md-2">
                      <input type="text"  name="startDate" class="buttonShape jalali-datepicker">
                  </div>
                  <div class="col-md-2">
                      <div class="buttonShape">از</div>
                  </div>
                  <div class="co-md-2"></div>
              </div>
              <div class="row" style="margin-top: 35px;">
                  <div class="col-md-2"></div>
                  <div class="col-md-8">
                      <input type="text" name="searchText" class="buttonShape" placeholder="کلمه مورد نظر برای جستجو را وارد کنید">
                  </div>
                  <div class="col-md-2"></div>
              </div>
              <div class="row" style="margin-top: 35px;">
                  <div class="col-md-2"></div>
                  <div class="col-md-8">
                      <button type="submit" class="buttonShape">انتخاب</button>
                  </div>
                  <div class="col-md-2"></div>
              </div>
          </form>
          <div class="row" style="margin-top: 35px;">
              <div class="col-md-2"></div>
              <div class="col-md-8">
                  <p class="buttonShape"> مجموع {{ type }}: {{ sumOfType|intcomma }}</p>
              </div>
          </div>
          <div class="row" style="margin-top: 35px;">
              <div class="col-md-2"></div>
              <div class="col-md-8">
                  <table dir="ltr" border=".5" width="100%"   cellpadding="4" cellspacing="3" align="center" style="border-color: rgb(43, 15, 7);">
                      <thead>
                      <tr>
                          <th scope="col" style="text-align: center">عنوان</th>
                          <th scope="col" style="text-align: center">رقم</th>
                          <th scope="col" style="text-align: center">تاریخ</th>
                          <th scope="col" style="text-align: center">منبع</th>
                          <th scope="col" style="text-align: center">تضویحات</th>
                      </tr>
                      {% for transaction in transactions %}
                      <tr align="center">
                          <td>{{ transaction.title }}</td>
                          <td>{{ transaction.cash|intcomma }}</td>
                          <td>{{ transaction.date|jdate:'%y/%m/%d' }}</td>
                          <td>{{ transaction.source }}</td>
                          <td>{{ transaction.desc }}</td>
                      </tr>
                      {% endfor %}
                      </thead>
                  </table>
              </div>
              <div class="col-md-2"></div>
          </div>
      </div>
      <script type="text/javascript">
		document.getElementById("mainRowCamputer").classList.toggle("hideAll")
		document.getElementById("mainRowPhones").classList.toggle("showAll")
      </script>
    </div>
      <footer class="section footer-classic context-dark bg-image" style="background: #4074B8; width:100%; bottom: 0; position: fixed; margin-bottom: -18px;">
        <div class="container-fluid">
            <div class="row" style="width: 100%;">
                <div class="row no-gutters social-container">
                    <div class="col-md-4">
                        <a class="social-inner" href="https://www.instagram.com/inaseri.20/"><span class="icon mdi mdi-instagram"></span><span>instagram</span></a>
                    </div>
                    <div class="col-md-4">
                        <a class="social-inner" href="#https://telegram.me/iman_naseri/"><span class="icon mdi mdi-twitter"></span><span>telegram</span></a>
                    </div>
                    <div class="col-md-4">
                        <a class="social-inner" href="#"><span class="icon mdi mdi-youtube-play"></span><span>email</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
      <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
      <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
      <script src="{% static 'money/js/moment.min.js' %}" type="text/javascript"></script>
      <script src="{% static 'money/js/moment-jalaali.js' %}"></script>
      <script src="{% static 'money/js/daterangepicker-fa-ex.js' %}"></script>
      <script>
        $(document).ready(function () {
            var night;
            var isRtl = true;
            var dateFormat = isRtl ? 'jYYYY/jMM/jDD' : 'YYYY/MM/DD';
            var dateFrom = false ? moment("") : undefined;
            var dateTo = false ? moment("") : undefined;
            var $dateRanger = $("#dateRangePicker");

            $dateRanger.daterangepicker({
                clearLabel: 'Clear',
                autoUpdateInput: !!(dateFrom && dateTo),
                minDate: moment(),
                autoApply: true,
                opens: isRtl ? 'left' : 'right',
                locale: {
                    separator: ' - ',
                    format: dateFormat
                },
                startDate: dateFrom,
                endDate: dateTo,
                jalaali: isRtl,
                showDropdowns: true
            }).on('apply.daterangepicker', function (ev, picker) {
                night = picker.endDate.diff(picker.startDate, 'days');
                if (night > 0) {
                    $(this).val(picker.startDate.format(dateFormat));
                    $('#dateRangePickerEnd').val(picker.endDate.format(dateFormat));
                } else {
                    $(this).val('')
                }
            });


            $('.ga-datepicker').daterangepicker({
                clearLabel: 'Clear',
                // autoUpdateInput: !!(dateFrom && dateTo),
                //minDate: moment(),
                autoApply: true,
                opens: 'right',
                singleDatePicker: true,
                showDropdowns: true,
                language: 'en'
            }).on('apply.daterangepicker', function () {
                $('.tooltip').hide();
                $('.date-select').text($(this).val());
            });

            $('.jalali-datepicker').daterangepicker({
                clearLabel: 'Clear',
                autoApply: true,
                opens: 'left',
                singleDatePicker: true,
                showDropdowns: true,
                jalaali: true,
                language: 'fa'
            }).on('apply.daterangepicker', function () {
                $('.tooltip').hide();
                $('.date-select').text($(this).val());
            });

            $(document).on('mouseover', '.daterangepicker .calendar td', function () {
                var gagDate = $(this).attr('data-original-title');
                $('.date-hover').text('');
                $('.date-hover').text(gagDate);

                $('[data-toggle="tooltip"]').tooltip()
            });

        });
      </script>
  </body>
</html>