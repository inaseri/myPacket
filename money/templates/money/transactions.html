<!DOCTYPE html>
{% load static %}
{% load pwa %}
{% load Iman %}
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="HandheldFriendly" content="true" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>همه تراکنش ها</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <!-- Bootstrap core CSS -->
  <!-- Bootstrap core CSS -->
  <link href="{% static 'money/css/bootstrap.min.css' %}" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href=" {% static 'money/css/mdb.min.css' %}" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="{% static 'money/css/style.css' %}" rel="stylesheet">
  <link href="{% static 'money/daterangepicker.css' %}" rel="stylesheet" type="text/css" media="all" />
  <link href="{% static 'money/datepicker-theme.css' %}" rel="stylesheet" type="text/css" media="all"  />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  {% progressive_web_app_meta %}
</head>

  <body style="background-color: #f1f1f1;">
    <!--Main Navigation-->
    <header>
      <nav class="navbar fixed-top navbar-expand-lg navbar-dark pink scrolling-navbar">
        <a class="navbar-brand" href="{% url 'home' %}"><strong>برگشت</strong></a>
      </nav>
    </header>

    <div class="container-fluid">
      {% load humanize %}
        <form method="post">
            {% csrf_token %}
            <div id="mainRowPhones">
                <div class="row" style="margin-top: 20%;">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <select class="browser-default custom-select" name="bank">
                            {% if selected_source %}
                                <option value="{{ selected_source.id }}">{{ selected_source.name_bank }}</option>
                            {% endif %}
                            <option value="0">همه</option>
                            {% for company in name_bank %}
                                <option value="{{ company.id }}">{{ company.name_bank }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4"></div>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-2">
                        <div class="md-form">
                            <input placeholder="تاریخ" type="text" name="endDate" class="form-control jalali-datepicker" id="date">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <span class="badge badge-pill badge-primary" style="width: 100%; height: 30%; padding-bottom: 18px;">تا تاریخ</span>
                    </div>
                    <div class="col-md-2" style="margin-top: -5%;">
                        <div class="md-form">
                            <input placeholder="تاریخ" type="text" name="startDate" class="form-control jalali-datepicker" id="date">
                        </div>
                    </div>
                    <div class="col-md-3"></div>
                </div>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <button type="submit" class="btn btn-default btn-lg btn-block" style="margin-left: 2px;">فیلتر کردن</button>
                    </div>
                    <div class="col-md-4"></div>
                </div>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <span class="badge badge-pill badge-primary" style="width: 100%; height: 60%; margin-top: 5%; font-size: medium">مجموع {{ type }}: {{ sumOfType|intcomma }}</span>
                    </div>
                    <div class="col-md-4"></div>
                </div>
                <div class="row" style="margin-top: 3%;">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <div id="table" class="table-editable">
                                    <table class="table table-bordered table-responsive-md table-striped text-center">
                                        <thead>
                                        <tr>
                                            <th class="text-center">ویرایش</th>
                                            <th class="text-center">رقم</th>
                                            <th class="text-center">تاریخ</th>
                                            <th class="text-center">توضیحات</th>
                                            <th class="text-center">عنوان</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for transaction in transactions %}
                                            <tr>
                                                <td class="pt-3-half" contenteditable="true">
                                                    <span class="table-remove"><button type="button"
                                                                                       class="btn btn-danger btn-rounded btn-sm my-0">ویرایش</button></span>
                                                </td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.cash|intcomma }}</td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.date|jdate:'%y/%m/%d' }}</td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.desc }}</td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.title }}</td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mainRowCamputer">
                <div class="row" style="margin-top: 5%;">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <select class="browser-default custom-select" name="bank">
                            {% if selected_source %}
                                <option value="{{ selected_source.id }}">{{ selected_source.name_bank }}</option>
                            {% endif %}
                            <option value="0">انتخاب منبع مالی</option>
                            {% for company in name_bank %}
                                <option value="{{ company.id }}">{{ company.name_bank }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4"></div>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-2">
                        <div class="md-form">
                            <input placeholder="تاریخ" type="text" name="endDate" class="form-control jalali-datepicker" id="date">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <span class="badge badge-pill badge-primary" style="width: 100%; height: 30%; margin-top: 15%;">تا تاریخ</span>
                    </div>
                    <div class="col-md-2">
                        <div class="md-form">
                            <input placeholder="تاریخ" type="text" name="startDate" class="form-control jalali-datepicker" id="date">
                        </div>
                    </div>
                    <div class="col-md-3"></div>
                </div>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <button type="submit" class="btn btn-default btn-lg btn-block" style="margin-left: 2px;">فیلتر کردن</button>
                    </div>
                    <div class="col-md-4"></div>
                </div>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <span class="badge badge-pill badge-primary" style="width: 100%; height: 60%; margin-top: 5%; font-size: medium">مجموع {{ type }}: {{ sumOfType|intcomma }}</span>
                    </div>
                    <div class="col-md-4"></div>
                </div>
                <div class="row" style="margin-top: 3%;">
                    <div class="col-md-3"></div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <div id="table" class="table-editable">
                                    <table class="table table-bordered table-responsive-md table-striped text-center">
                                        <thead>
                                        <tr>
                                            <th class="text-center">ویرایش</th>
                                            <th class="text-center">رقم</th>
                                            <th class="text-center">تاریخ</th>
                                            <th class="text-center">توضیحات</th>
                                            <th class="text-center">عنوان</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for transaction in transactions %}
                                            <tr>
                                                <td class="pt-3-half" contenteditable="true">
                                                    <span class="table-remove">
                                                        <button class="btn btn-danger btn-rounded btn-sm my-0" name="changeTransaction" value="{{ transaction.id }}">ویرایش</button>
                                                    </span>
                                                </td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.cash|intcomma }}</td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.date|jdate:'%y/%m/%d' }}</td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.desc }}</td>
                                                <td class="pt-3-half" contenteditable="true">{{ transaction.title }}</td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3"></div>
                </div>
            </div>
        </form>
    </div>

  <!-- SCRIPTS -->
  <!-- JQuery -->
  <script type="text/javascript" src="{% static 'money/js/' %}"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="{% static 'money/js/popper.min.js' %}"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="{% static 'money/js/bootstrap.min.js' %}"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="{% static 'money/js/mdb.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'money/js/moment.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'money/js/moment.min.js' %}" ></script>
  <script src="{% static 'money/js/moment-jalaali.js' %}"></script>
  <script src="{% static 'money/js/daterangepicker-fa-ex.js' %}"></script>
  <script>
        $(document).ready(function () {
        var night;
        var isRtl = true;
        var dateFormat = isRtl ? 'jYYYY/jMM/jDD' : 'YYYY/MM/DD';
        var dateFrom = false ? moment("") : undefined;
        var dateTo = false ? moment("") : undefined;
        var $dateRanger = $("#dateRangePicker");

        $dateRanger.daterangepicker({
            clearLabel: 'Clear',
            autoUpdateInput: !!(dateFrom && dateTo),
            minDate: moment(),
            autoApply: true,
            opens: isRtl ? 'left' : 'right',
            locale: {
                separator: ' - ',
                format: dateFormat
            },
            startDate: dateFrom,
            endDate: dateTo,
            jalaali: isRtl,
            showDropdowns: true
        }).on('apply.daterangepicker', function (ev, picker) {
            night = picker.endDate.diff(picker.startDate, 'days');
            if (night > 0) {
                $(this).val(picker.startDate.format(dateFormat));
                $('#dateRangePickerEnd').val(picker.endDate.format(dateFormat));
            } else {
                $(this).val('')
            }
        });


        $('.ga-datepicker').daterangepicker({
            clearLabel: 'Clear',
            // autoUpdateInput: !!(dateFrom && dateTo),
            //minDate: moment(),
            autoApply: true,
            opens: 'right',
            singleDatePicker: true,
            showDropdowns: true,
            language: 'en'
        }).on('apply.daterangepicker', function () {
            $('.tooltip').hide();
            $('.date-select').text($(this).val());
        });

        $('.jalali-datepicker').daterangepicker({
            clearLabel: 'Clear',
            autoApply: true,
            opens: 'left',
            singleDatePicker: true,
            showDropdowns: true,
            jalaali: true,
            language: 'fa'
        }).on('apply.daterangepicker', function () {
            $('.tooltip').hide();
            $('.date-select').text($(this).val());
        });

        $(document).on('mouseover', '.daterangepicker .calendar td', function () {
            var gagDate = $(this).attr('data-original-title');
            $('.date-hover').text('');
            $('.date-hover').text(gagDate);

            $('[data-toggle="tooltip"]').tooltip()
        });

    });
    </script>
  <script type="text/javascript" src="{% static 'money/js/moment.min.js' %}"></script>
  <script type="text/javascript">
		document.getElementById("mainRowCamputer").classList.toggle("hideAll")
		document.getElementById("mainRowPhones").classList.toggle("showAll")
  </script>

  </body>
</html>